---
name: requirement
description: 入力される要求から要件定義書を作成する
---
## usage
入力された自然言語から要求を整理する。
要件整理の際は 質問プロセス に従って質疑応答を繰り返し、詳細を詰めていく


## 出力
  gh コマンドを使って issue を作成する
  format: markdown
  items: 
    why: なぜその機能が必要なのかを説明する
    ux: 提供したいユーザー体験を記述する
    issue: 解決したい課題を記述する
    usecase: 想定されるユースケースをリストアップする
    specdelta: 既存の仕様との差分を説明する

## UseCase - ユースケース定義
  
Gherkinフレームで記述してください（下記のように）
```
Feature: 顧客管理アシスタントのルーティング

  Scenario: 顧客情報の照会
    Given データベースに「田中太郎」の情報が存在する
    When エンドポイントに「田中さんの連絡先を教えて」と送信する
    Then MCPツール「CustomerSearch」が実行される
    And 応答に「090-xxxx-xxxx」が含まれている

  Scenario: 支払い情報の更新（Stripe連携）
    Given ユーザーのサブスクリプションが有効である
    When エンドポイントに「支払い方法をカードに変更したい」と送信する
    Then MCPツール「StripeIntegration」から「SetupIntentURL」が返される
```

## 既存システムとの整合性確認
  
  以下を必ず確認してください：
  
  1. **ドメイン知識との整合性**
     - 用語が `ssot/domain/glossary.md` と一致しているか？
     - ビジネスルールに違反していないか？
  
  2. **既存ユースケースとの関係**
     - 類似のユースケースは既に存在するか？
     - 既存ユースケースと競合しないか？
     - 既存ユースケースを拡張すべきか、新規作成すべきか？

## 質問プロセス
  
  ユーザーの最初の要求は簡潔なことが多いです。
  以下のプロセスで深掘りしてください：
  
  1. **初期理解** - 要求を要約し、理解を確認
  2. **WHY深掘り** - ビジネス価値を明確化
  3. **UX具体化** - ユーザー体験を詳細化
  4. **シナリオ展開** - 具体的な使用場面を確認
  5. **制約確認** - 技術的・ビジネス的制約を確認
  6. **既存調査** - 類似機能や競合を確認

  各ステップで、ユーザーに明確な質問を投げかけてください。